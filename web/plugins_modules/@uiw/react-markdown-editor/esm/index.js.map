{
  "version": 3,
  "sources": [
    "../src/index.tsx"
  ],
  "names": [
    "React",
    "useState",
    "createRef",
    "useRef",
    "useEffect",
    "useImperativeHandle",
    "useMemo",
    "CodeMirror",
    "MarkdownPreview",
    "ToolBar",
    "getCommands",
    "getModeCommands",
    "forwardRef",
    "MarkdownEditor",
    "props",
    "ref",
    "prefixCls",
    "className",
    "onChange",
    "toolbars",
    "toolbarsMode",
    "visible",
    "visibleEditor",
    "previewProps",
    "codemirrorProps",
    "value",
    "setValue",
    "codeMirror",
    "previewContainer",
    "editor",
    "setEditor",
    "container",
    "containerEditor",
    "preview",
    "current",
    "toolBarProps",
    "editorProps",
    "codeEditor",
    "data",
    "getValue",
    "instance",
    "mdp"
  ],
  "mappings": "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",
  "sourcesContent": [
    "import React, { useState, createRef, useRef, useEffect, useImperativeHandle, useMemo } from 'react';\nimport CodeMirror, { ICodeMirror } from './components/CodeMirror';\nimport MarkdownPreview, { MarkdownPreviewProps } from '@uiw/react-markdown-preview';\nimport ToolBar, { IToolBarProps } from './components/ToolBar';\nimport { getCommands, getModeCommands } from './commands';\nimport './index.less';\n\nexport * from './commands';\n\nexport interface IMarkdownEditor extends ICodeMirror {\n  className?: string;\n  prefixCls?: string,\n  value?: string,\n  height?: number,\n  visible?: boolean,\n  visibleEditor?: boolean,\n  toolbars?: IToolBarProps['toolbars'],\n  toolbarsMode?: IToolBarProps['toolbars'],\n  previewProps?: MarkdownPreviewProps;\n  options?: CodeMirror.EditorConfiguration,\n}\n\nexport interface MarkdownEditorRef {\n  editor?: CodeMirror.Editor;\n  preview?: HTMLDivElement | null;\n}\n\nexport default React.forwardRef<MarkdownEditorRef, IMarkdownEditor>(MarkdownEditor);\n\nfunction MarkdownEditor(\n  props: IMarkdownEditor,\n  ref?:\n    | ((instance: MarkdownEditorRef) => void)\n    | React.RefObject<MarkdownEditorRef>\n    | null\n) {\n  const {\n    prefixCls = 'md-editor', className,\n    onChange,\n    toolbars = getCommands(),\n    toolbarsMode = getModeCommands(),\n    visible = true,\n    visibleEditor = true,\n    previewProps = {}, ...codemirrorProps } = props;\n  const [value, setValue] = useState(props.value || '');\n  const codeMirror = createRef<CodeMirror>();\n  const previewContainer = useRef<HTMLDivElement | null>()\n  const [editor, setEditor] = useState<CodeMirror.Editor>();\n\tconst container = useRef<HTMLDivElement>(null);\n\tconst containerEditor = useRef<HTMLDivElement>(null);\n\n  useImperativeHandle(ref, () => ({\n    editor: editor,\n    preview: previewContainer.current,\n  }));\n\n  useEffect(() => {\n    if (codeMirror.current) {\n      setEditor(codeMirror.current.editor);\n    }\n  }, [codeMirror.current]);\n\n  const toolBarProps = {\n    editor,\n    preview: previewContainer.current,\n    container: container.current,\n    containerEditor: containerEditor.current,\n    editorProps: props\n  }\n  const codeEditor = useMemo(() => (\n    <CodeMirror\n      visibleEditor={visibleEditor}\n      {...codemirrorProps}\n      ref={codeMirror}\n      onChange={(editor, data) => {\n        setValue(editor.getValue());\n        onChange && onChange(editor, data, editor.getValue())\n      }}\n    />\n  ), [visibleEditor, codemirrorProps])\n  return (\n    <div ref={container}>\n      <div className={`${prefixCls || ''} ${className || ''}`}>\n        <ToolBar {...toolBarProps} toolbars={toolbarsMode} mode />\n        <ToolBar {...toolBarProps} toolbars={toolbars} />\n        <div className={`${prefixCls}-content`}>\n          <div className={`${prefixCls}-content-editor`} ref={containerEditor}>\n            {visibleEditor && codeEditor}\n          </div>\n          <MarkdownPreview\n            {...previewProps}\n            data-visible={!!visible}\n            className={`${prefixCls}-preview`}\n            ref={(instance) => {\n              if(instance && instance.mdp) {\n                previewContainer.current = instance.mdp.current\n              }\n            }}\n            source={value}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n"
  ]
}